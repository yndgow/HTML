<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Insert title here</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
      a {
        color: #000;
        text-decoration: none;
        outline: none;
      }

      ul {
        list-style: none;
        padding: 0px;
        margin: 0px;
      }

      li {
        list-style: none;
        padding-left: 0px;
      }

      .admin-wrap {
        height: 100%;
        padding: 0;
        margin: 0;
      }

      .admin-wrap .top-bar {
        background-color: #ccc;
        border: 1px solid;
        height: 50px;
      }

      .admin-wrap .logo {
        height: 40px;
      }

      .admin-wrap .container {
        display: flex;
        height: 100%;
      }

      .admin-wrap .side-bar {
        background-color: #ccc;
        border-right: 1px solid;
        border-left: 1px solid;
        border-bottom: 1px solid;
        width: 200px;
        height: 100%;
      }

      .admin-wrap .side-bar ul {
        margin-left: 5px;
      }

      .admin-wrap .side-bar li {
        list-style: inside;
      }

      .admin-wrap .side-bar a:hover {
        color: #fff;
      }

      .admin-wrap .main-console {
        flex-grow: 1;
      }

      .admin-wrap .list-table-form {
        margin-top: 50px;
        margin-left: 30px;
      }

      .admin-wrap .top-menu {
        display: flex;
        justify-content: space-between;
      }

      .admin-wrap .insert-btn {
      }
      .admin-wrap .list-table {
        margin-top: 4px;

        border: 1px solid;
        border-collapse: collapse;

        text-align: center;
      }

      .admin-wrap .list-table th {
        border: 1px solid #444444;

        background-color: #ccc;

        padding: 10px;
      }

      .admin-wrap .list-table td {
        border: 1px solid #444444;
        padding: 10px;
      }

      .admin-wrap .one-table-form {
        margin-top: 54px;
        margin-left: 30px;
      }

      .admin-wrap .one-table {
        border: 1px solid;
        border-collapse: collapse;
      }

      .admin-wrap .one-table td {
        border: 1px solid #444444;
        padding: 10px;
      }

      .admin-wrap .one-table td:first-child {
        text-align: center;
        background-color: #ccc;
      }

      .admin-wrap .one-table td:last-child {
        background-color: #fff;
        width: 500px;
      }

      .admin-wrap .one-table input[type='text'] {
        width: 300px;
      }

      .admin-wrap .one-table-form input[type='submit'] {
        margin-top: 4px;
        float: left;
      }

      .admin-wrap .pagination {
        display: flex;
        justify-content: center;
        margin-top: 4px;
      }

      .admin-wrap .pagination li {
        border: 1px solid #000;
        margin-left: 4px;
        margin-right: 4px;
        list-style: none; /* kjh */
      }

      .admin-wrap .pagination a {
        color: #00f;
        padding: 4px;
      }

      .admin-wrap .pagination label {
        color: #000;
        padding: 4px;
      }

      ul {
        list-style: none;
      }
    </style>
  </head>
  <body>
    <div class="admin-wrap">
      <div class="top-bar">
        <a href="/"> <img class="logo" src="/images/logo/logo.png" />admin </a>
      </div>
      <div class="container">
        <div class="side-bar">
          <div>
            <ul>
              <li>
                <a href="/admin/offlineStoreManagement">오프라인매장관리</a>
              </li>
              <li>
                <a href="/admin/qnaList">문의사항관리</a>
              </li>
              <li>
                <a href="/admin/product">상품관리</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="main-console">
          <form class="one-table-form" method="POST" action="/admin/product/${adminProductList[0].id}" enctype="multipart/form-data">
            <h2>상품 수정 페이지</h2>
            <table class="one-table">
              <tbody>
                <tr>
                  <td>상품 아이디</td>
                  <td><input type="hidden" id="product-feature" name="id" value="${adminProductList[0].id}" />${adminProductList[0].id}</td>
                </tr>
                <tr>
                  <td>상품 이름</td>
                  <td><input type="text" id="prduct-name" name="productName" value="${adminProductList[0].productName}" /></td>
                </tr>
                <tr>
                  <td>상품 가격</td>
                  <td><input type="number" id="prduct-price" name="price" value="${adminProductList[0].price}" /></td>
                </tr>
                <tr>
                  <td>상품 설명</td>
                  <td>
                    <textarea rows="4" cols="140" id="product-feature" name="productFeature" style="resize: none">${adminProductList[0].productFeature}</textarea>
                  </td>
                </tr>
                <tr>
                  <td>재고</td>
                  <td><input type="number" id="product-quantity" name="quantity" value="${adminProductList[0].quantity}" /></td>
                </tr>
                <tr>
                  <td>1차카테고리</td>
                  <td>
                    <select name="firstCategoryId" id="first-category-id">
                      <option value="1">트래블</option>
                      <option value="2">핸드백</option>
                      <option value="3">지갑</option>
                      <option value="4">쥬얼리&시계</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>2차카테고리</td>
                  <td>
                    <select name="secondCategoryId" id="second-category-id">
                      <option value="1">트래블</option>
                      <option value="2">핸드백</option>
                      <option value="3">지갑</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>썸네일</td>
                  <td id="thumbnailImgTd">
                    <div style="display: flex; justify-content: center; text-align: center"></div>
                  </td>
                </tr>
                <tr>
                  <td>상품 세부 이미지</td>
                  <td id="detailImglTd">
                    <div style="display: flex; justify-content: center; text-align: center"></div>
                  </td>
                </tr>
              </tbody>
            </table>
            <input type="submit" value="상품 수정" />
          </form>
        </div>
      </div>
    </div>
  </body>

  <script>
    $('.list-table-form').eq(0).width($('.list-table').eq(0).outerWidth());
    // 1차 카테고리 변경시 2차 카테고리 변경

    const firstSelect = document.getElementById('first-category-id');
    const secondSelect = document.getElementById('second-category-id');

    firstSelect.addEventListener('change', function (e) {
      const fcId = e.target.value;
      fetch(`http://localhost:90/admin/product/category/first/${fcId}`)
        .then((res) => res.json())
        .then((data) => {
          secondSelect.innerHTML = '';
          data.forEach((e) => {
            let scOption = document.createElement('option');
            scOption.value = e.id;
            scOption.textContent = e.secondCategoryName;
            secondSelect.append(scOption);
          });
        })
        .catch((err) => console.log(err));
    });

    const setSecondCategory = () => {};

    // const getFetchData = (url) => {
    //   return fetch(url)
    //     .then((response) => response.json())
    //     .then(function (data) {
    //       if (data) {
    //         // console.log('data : ' + data);
    //         return data;
    //       } else {
    //         alert('정보를 불러오지 못했습니다.');
    //       }
    //     })
    //     .catch((error) => {
    //       console.error(error);
    //     });
    // };
  </script>
</html>
